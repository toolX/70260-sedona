!function(){var mobileMenuOpen=document.querySelector(".page-header__toggle--open"),mobileMenuClose=document.querySelector(".page-header__toggle--close"),nav=document.querySelector(".main-navigation");isMenuOpen=!1,mobileMenuOpen.addEventListener("tap",function(event){0==isMenuOpen&&(nav.classList.add("menu-show"),isMenuOpen=!0)}),mobileMenuClose.addEventListener("tap",function(event){1==isMenuOpen&&(nav.classList.remove("menu-show"),isMenuOpen=!1)})}(),function(){function initNumberField(parent){function changeNumber(operation){var value=Number(input.value);isNaN(value)&&(value=0),operation?input.value=value+1:(input.value=value-1,0==value&&(input.value=0))}var input=parent.querySelector("input"),minus=parent.querySelector(".numerator-body__link--minus"),plus=parent.querySelector(".numerator-body__link--plus");minus.addEventListener("tap",function(event){event.preventDefault(),changeNumber(!1)}),plus.addEventListener("tap",function(event){event.preventDefault(),changeNumber(!0)})}function request(data,fn){var xhr=new XMLHttpRequest,time=(new Date).getTime();xhr.open("post","https://echo.htmlacademy.ru/adaptive?"+time),xhr.addEventListener("readystatechange",function(){switch(xhr.readyState){case 1:case 2:case 3:formLink.classList.add("form-button--blink");break;case 4:fn(xhr.responseText),popupOk.classList.add("form-message--show"),isOpenOk=!0;break;default:popupError.classList.add("form-message--show"),isOpenError=!0}}),xhr.send(data)}for(var elements=document.querySelectorAll(".numerator-body"),i=0;i<elements.length;i++)initNumberField(elements[i]);if("FormData"in window){var form=document.querySelector("form"),formLink=document.querySelector(".form-button"),popupOk=document.querySelector(".form-message--ok"),popupError=document.querySelector(".form-message--error"),popupErrorClose=document.querySelector(".form-message__button--error"),popupOkClose=popupOk.querySelector(".form-message__button--ok");isOpenOk=!1,isOpenError=!1,formLink.addEventListener("tap",function(event){event.preventDefault();var data=new FormData(form);request(data,function(response){console.log(response)})}),popupOkClose.addEventListener("tap",function(event){isOpenOk===!0&&(event.preventDefault(),popupOk.classList.remove("form-message--show"),isOpenOk=!1)}),popupErrorClose.addEventListener("tap",function(event){isOpenError===!0&&(event.preventDefault(),popupError.classList.remove("form-message--show"),isOpenError=!1)})}}();